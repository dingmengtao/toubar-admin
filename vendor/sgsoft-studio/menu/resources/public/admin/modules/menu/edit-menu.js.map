{"version":3,"sources":["webpack:///projects-root/laravel/public/admin/modules/menu/edit-menu.js","webpack:///webpack/bootstrap cfe27c743634602740fd","webpack:///./core/menus/resources/assets/js/admin/modules/menu/edit-menu.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","17","18","WebEdManageMenu","$body","$","$_TARGET","$_UPDATE_TO","$_DELETED_NODES","DELETED_NODES","handleItems","MENU_NESTABLE_TEMPLATES","listGroup","html","listItem","MENU_DATA","Helpers","jsonDecode","val","renderListGroup","data","$listGroup","_","each","value","index","append","renderListItem","itemType","arrayGet","title","size","replace","$listItem","find","remove","nestable","group","maxDepth","expandBtnHTML","collapseBtnHTML","on","event","preventDefault","this","toggleClass","closest","$current","$label","attr","$box","addCustomLink","addOtherLinks","$_box","id","entity_id","type","model_title","url","css_class","icon_font","target","globalData","currentData","extend","text","trim","push","prop","$parent","$childs","after","exportData","serializeData","jsonEncode","init","window","load","jQuery"],"mappings":"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","file":"projects-root/laravel/public/admin/modules/menu/edit-menu.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 17);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 17:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(18);\n\n\n/***/ }),\n\n/***/ 18:\n/***/ (function(module, exports) {\n\n// Init\nvar WebEdManageMenu = function () {\n    \"use strict\";\n\n    var $body = $('body');\n\n    var $_TARGET = $('.nestable-menu');\n\n    var $_UPDATE_TO = $('#menu_structure');\n\n    var $_DELETED_NODES = $('#deleted_nodes');\n\n    var DELETED_NODES = [];\n\n    var handleItems = function handleItems() {\n        /**\n         * The templates\n         */\n        var MENU_NESTABLE_TEMPLATES = {\n            listGroup: $('#menus_template_list_group').html(),\n            listItem: $('#menus_template_list_item').html()\n        };\n\n        var MENU_DATA = Helpers.jsonDecode($_UPDATE_TO.val(), []);\n\n        var initNestable = function initNestable() {\n            /**\n             * Init nestable\n             */\n            $_TARGET.nestable({\n                group: 1,\n                maxDepth: 10,\n                expandBtnHTML: '',\n                collapseBtnHTML: ''\n            });\n        };\n\n        var handleDetails = function handleDetails() {\n            /**\n             * Toggle item details\n             */\n            $body.on('click', '.dd-item .dd3-content a.show-item-details', function (event) {\n                event.preventDefault();\n                $(this).toggleClass('active');\n                $(this).closest('.dd-item').toggleClass('active');\n            });\n\n            /**\n             * Change details value\n             */\n            $body.on('change keyup', '.dd-item .item-details .fields input[type=text], .dd-item .item-details .fields select', function (event) {\n                event.preventDefault();\n                var $current = $(this);\n                var $label = $current.closest('label'),\n                    $currentItem = $current.closest('.dd-item');\n                $currentItem.data($label.attr('data-field'), $current.val());\n            });\n        };\n\n        var renderListGroup = function renderListGroup(data) {\n            var $listGroup = $(MENU_NESTABLE_TEMPLATES.listGroup);\n            _.each(data, function (value, index) {\n                $listGroup.append(renderListItem(value));\n            });\n\n            return $listGroup;\n        };\n\n        var renderListItem = function renderListItem(data) {\n            var listItem = MENU_NESTABLE_TEMPLATES.listItem;\n            var itemType = Helpers.arrayGet(data, 'type', '');\n\n            var title = Helpers.arrayGet(data, 'title');\n            if (!_.size(title)) {\n                title = Helpers.arrayGet(data, 'model_title', '');\n            }\n\n            listItem = listItem.replace(/__title__/gi, title);\n            listItem = listItem.replace(/__type__/gi, itemType);\n            var $listItem = $(listItem);\n\n            $listItem.find('[data-field=title] input[type=text]').val(Helpers.arrayGet(data, 'title', ''));\n            $listItem.find('[data-field=icon_font] input[type=text]').val(Helpers.arrayGet(data, 'icon_font', ''));\n            $listItem.find('[data-field=css_class] input[type=text]').val(Helpers.arrayGet(data, 'css_class', ''));\n            $listItem.find('[data-field=target] select').val(Helpers.arrayGet(data, 'target', ''));\n\n            if (itemType !== 'custom-link') {\n                $listItem.find('[data-field=url]').remove();\n                $listItem.data('url', null);\n            } else {\n                $listItem.find('[data-field=url] input[type=text]').val(Helpers.arrayGet(data, 'url', ''));\n                $listItem.data('url', Helpers.arrayGet(data, 'url', null));\n            }\n\n            $listItem.data('id', Helpers.arrayGet(data, 'id', ''));\n            $listItem.data('entity_id', Helpers.arrayGet(data, 'entity_id', ''));\n            $listItem.data('type', Helpers.arrayGet(data, 'type', ''));\n            $listItem.data('title', Helpers.arrayGet(data, 'title', ''));\n            $listItem.data('model_title', Helpers.arrayGet(data, 'model_title', ''));\n            $listItem.data('icon_font', Helpers.arrayGet(data, 'icon_font', ''));\n            $listItem.data('css_class', Helpers.arrayGet(data, 'css_class', ''));\n            $listItem.data('target', Helpers.arrayGet(data, 'target', ''));\n\n            if (Helpers.arrayGet(data, 'children', [])) {\n                $listItem.append(renderListGroup(Helpers.arrayGet(data, 'children')));\n            }\n            return $listItem;\n        };\n\n        var renderMenu = function renderMenu() {\n            $_TARGET.append(renderListGroup(MENU_DATA));\n        };\n\n        var handleAddNew = function handleAddNew() {\n            /**\n             * Determine when the list group exists\n             * If not exists, create new\n             */\n            if (!_.size($_TARGET.find('> .dd-list'))) {\n                $_TARGET.append($(MENU_NESTABLE_TEMPLATES.listGroup));\n            }\n\n            /**\n             * Handle click button add item\n             */\n            $body.on('click', '.box-link-menus .add-item', function (event) {\n                event.preventDefault();\n                var $box = $(this).closest('.box-link-menus');\n\n                switch ($box.data('type')) {\n                    case 'custom-link':\n                        $_TARGET.find('> .dd-list').append(addCustomLink($box));\n                        break;\n                    default:\n                        $_TARGET.find('> .dd-list').append(addOtherLinks($box));\n                        break;\n                }\n            });\n\n            var addCustomLink = function addCustomLink($_box) {\n                var data = {\n                    id: null,\n                    entity_id: null,\n                    type: $_box.data('type'),\n                    title: $_box.find('input[type=text][data-field=title]').val(),\n                    model_title: null,\n                    url: $_box.find('input[type=text][data-field=url]').val(),\n                    css_class: $_box.find('input[type=text][data-field=css_class]').val(),\n                    icon_font: $_box.find('input[type=text][data-field=icon_font]').val(),\n                    target: $_box.find('select[data-field=target]').val()\n                };\n\n                if (!data.title || !data.url) {\n                    return;\n                }\n\n                $_box.find('input[type=text]').val('');\n\n                return renderListItem(data);\n            };\n\n            var addOtherLinks = function addOtherLinks($_box) {\n                var globalData = {\n                    id: null,\n                    type: $_box.data('type')\n                };\n                var data = [];\n                $_box.find('input[type=checkbox]:checked').each(function () {\n                    var $current = $(this);\n                    var $label = $current.closest('label');\n                    var currentData = $.extend(true, {\n                        entity_id: $current.val(),\n                        title: null,\n                        model_title: $label.text().trim(),\n                        url: '',\n                        css_class: '',\n                        icon_font: ''\n                    }, globalData);\n                    data.push(renderListItem(currentData));\n                });\n\n                $_box.find('input[type=checkbox]').prop('checked', false);\n\n                return data;\n            };\n        };\n\n        var handleRemove = function handleRemove() {\n            /**\n             * Remove node\n             */\n            $body.on('click', '.dd-item .item-details .btn-remove', function (event) {\n                event.preventDefault();\n                var $parent = $(this).closest('.dd-item');\n                var $childs = $parent.find('> .dd-list > .dd-item');\n                if (_.size($childs)) {\n                    $parent.after($childs);\n                }\n                DELETED_NODES.push($parent.data('id'));\n                $parent.remove();\n            });\n        };\n\n        /**\n         * Render\n         */\n        renderMenu();\n        initNestable();\n        handleDetails();\n        handleAddNew();\n        handleRemove();\n    };\n\n    var exportData = function exportData() {\n        /**\n         * Serialize data from nestable\n         */\n        var serializeData = function serializeData() {\n            return $_TARGET.nestable('serialize');\n        };\n\n        /**\n         * Submit the form\n         */\n        $body.on('submit', $_TARGET.closest('form'), function (event) {\n            //event.preventDefault();\n            $_UPDATE_TO.val(Helpers.jsonEncode(serializeData()));\n            $_DELETED_NODES.val(Helpers.jsonEncode(DELETED_NODES));\n        });\n    };\n\n    return {\n        /**\n         * Init the module\n         */\n        init: function init() {\n            handleItems();\n            exportData();\n        }\n    };\n}();\n\n(function ($) {\n    $(window).load(function () {\n        WebEdManageMenu.init();\n    });\n})(jQuery);\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// projects-root/laravel/public/admin/modules/menu/edit-menu.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cfe27c743634602740fd","// Init\nlet WebEdManageMenu = function () {\n    \"use strict\";\n\n    let $body = $('body');\n\n    let $_TARGET = $('.nestable-menu');\n\n    let $_UPDATE_TO = $('#menu_structure');\n\n    let $_DELETED_NODES = $('#deleted_nodes');\n\n    let DELETED_NODES = [];\n\n    let handleItems = function () {\n        /**\n         * The templates\n         */\n        let MENU_NESTABLE_TEMPLATES = {\n            listGroup: $('#menus_template_list_group').html(),\n            listItem: $('#menus_template_list_item').html(),\n        };\n\n        let MENU_DATA = Helpers.jsonDecode($_UPDATE_TO.val(), []);\n\n        let initNestable = function () {\n            /**\n             * Init nestable\n             */\n            $_TARGET.nestable({\n                group: 1,\n                maxDepth: 10,\n                expandBtnHTML: '',\n                collapseBtnHTML: ''\n            });\n        };\n\n        let handleDetails = function () {\n            /**\n             * Toggle item details\n             */\n            $body.on('click', '.dd-item .dd3-content a.show-item-details', function (event) {\n                event.preventDefault();\n                $(this).toggleClass('active');\n                $(this).closest('.dd-item').toggleClass('active');\n            });\n\n            /**\n             * Change details value\n             */\n            $body.on('change keyup', '.dd-item .item-details .fields input[type=text], .dd-item .item-details .fields select', function (event) {\n                event.preventDefault();\n                let $current = $(this);\n                let $label = $current.closest('label'),\n                    $currentItem = $current.closest('.dd-item');\n                $currentItem.data($label.attr('data-field'), $current.val());\n            });\n        };\n\n        let renderListGroup = function (data) {\n            let $listGroup = $(MENU_NESTABLE_TEMPLATES.listGroup);\n            _.each(data, function (value, index) {\n                $listGroup.append(renderListItem(value));\n            });\n\n            return $listGroup;\n        };\n\n        let renderListItem = function (data) {\n            let listItem = MENU_NESTABLE_TEMPLATES.listItem;\n            let itemType = Helpers.arrayGet(data, 'type', '');\n\n            let title = Helpers.arrayGet(data, 'title');\n            if (!_.size(title)) {\n                title = Helpers.arrayGet(data, 'model_title', '');\n            }\n\n            listItem = listItem.replace(/__title__/gi, title);\n            listItem = listItem.replace(/__type__/gi, itemType);\n            let $listItem = $(listItem);\n\n            $listItem.find('[data-field=title] input[type=text]').val(Helpers.arrayGet(data, 'title', ''));\n            $listItem.find('[data-field=icon_font] input[type=text]').val(Helpers.arrayGet(data, 'icon_font', ''));\n            $listItem.find('[data-field=css_class] input[type=text]').val(Helpers.arrayGet(data, 'css_class', ''));\n            $listItem.find('[data-field=target] select').val(Helpers.arrayGet(data, 'target', ''));\n\n            if (itemType !== 'custom-link') {\n                $listItem.find('[data-field=url]').remove();\n                $listItem.data('url', null);\n            } else {\n                $listItem.find('[data-field=url] input[type=text]').val(Helpers.arrayGet(data, 'url', ''));\n                $listItem.data('url', Helpers.arrayGet(data, 'url', null));\n            }\n\n            $listItem.data('id', Helpers.arrayGet(data, 'id', ''));\n            $listItem.data('entity_id', Helpers.arrayGet(data, 'entity_id', ''));\n            $listItem.data('type', Helpers.arrayGet(data, 'type', ''));\n            $listItem.data('title', Helpers.arrayGet(data, 'title', ''));\n            $listItem.data('model_title', Helpers.arrayGet(data, 'model_title', ''));\n            $listItem.data('icon_font', Helpers.arrayGet(data, 'icon_font', ''));\n            $listItem.data('css_class', Helpers.arrayGet(data, 'css_class', ''));\n            $listItem.data('target', Helpers.arrayGet(data, 'target', ''));\n\n            if (Helpers.arrayGet(data, 'children', [])) {\n                $listItem.append(renderListGroup(Helpers.arrayGet(data, 'children')));\n            }\n            return $listItem;\n        };\n\n        let renderMenu = function () {\n            $_TARGET.append(renderListGroup(MENU_DATA));\n        };\n\n        let handleAddNew = function () {\n            /**\n             * Determine when the list group exists\n             * If not exists, create new\n             */\n            if (!_.size($_TARGET.find('> .dd-list'))) {\n                $_TARGET.append($(MENU_NESTABLE_TEMPLATES.listGroup));\n            }\n\n            /**\n             * Handle click button add item\n             */\n            $body.on('click', '.box-link-menus .add-item', function (event) {\n                event.preventDefault();\n                let $box = $(this).closest('.box-link-menus');\n\n                switch ($box.data('type')) {\n                    case 'custom-link':\n                        $_TARGET.find('> .dd-list').append(addCustomLink($box));\n                        break;\n                    default:\n                        $_TARGET.find('> .dd-list').append(addOtherLinks($box));\n                        break;\n                }\n            });\n\n            let addCustomLink = function ($_box) {\n                let data = {\n                    id: null,\n                    entity_id: null,\n                    type: $_box.data('type'),\n                    title: $_box.find('input[type=text][data-field=title]').val(),\n                    model_title: null,\n                    url: $_box.find('input[type=text][data-field=url]').val(),\n                    css_class: $_box.find('input[type=text][data-field=css_class]').val(),\n                    icon_font: $_box.find('input[type=text][data-field=icon_font]').val(),\n                    target: $_box.find('select[data-field=target]').val(),\n                };\n\n                if (!data.title || !data.url) {\n                    return;\n                }\n\n                $_box.find('input[type=text]').val('');\n\n                return renderListItem(data);\n            };\n\n            let addOtherLinks = function ($_box) {\n                let globalData = {\n                    id: null,\n                    type: $_box.data('type'),\n                };\n                let data = [];\n                $_box.find('input[type=checkbox]:checked').each(function () {\n                    let $current = $(this);\n                    let $label = $current.closest('label');\n                    let currentData = $.extend(true, {\n                        entity_id: $current.val(),\n                        title: null,\n                        model_title: $label.text().trim(),\n                        url: '',\n                        css_class: '',\n                        icon_font: '',\n                    }, globalData);\n                    data.push(renderListItem(currentData));\n                });\n\n                $_box.find('input[type=checkbox]').prop('checked', false);\n\n                return data;\n            }\n        };\n\n        let handleRemove = function () {\n            /**\n             * Remove node\n             */\n            $body.on('click', '.dd-item .item-details .btn-remove', function (event) {\n                event.preventDefault();\n                let $parent = $(this).closest('.dd-item');\n                let $childs = $parent.find('> .dd-list > .dd-item');\n                if (_.size($childs)) {\n                    $parent.after($childs);\n                }\n                DELETED_NODES.push($parent.data('id'));\n                $parent.remove();\n            });\n        };\n\n        /**\n         * Render\n         */\n        renderMenu();\n        initNestable();\n        handleDetails();\n        handleAddNew();\n        handleRemove();\n    };\n\n    let exportData = function () {\n        /**\n         * Serialize data from nestable\n         */\n        let serializeData = function () {\n            return $_TARGET.nestable('serialize');\n        };\n\n        /**\n         * Submit the form\n         */\n        $body.on('submit', $_TARGET.closest('form'), function (event) {\n            //event.preventDefault();\n            $_UPDATE_TO.val(Helpers.jsonEncode(serializeData()));\n            $_DELETED_NODES.val(Helpers.jsonEncode(DELETED_NODES));\n        });\n    };\n\n    return {\n        /**\n         * Init the module\n         */\n        init: function () {\n            handleItems();\n            exportData();\n        }\n    };\n}();\n\n(function ($) {\n    $(window).load(function () {\n        WebEdManageMenu.init();\n    });\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./core/menus/resources/assets/js/admin/modules/menu/edit-menu.js"],"sourceRoot":""}