!function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=17)}({17:function(t,e,a){t.exports=a(18)},18:function(t,e){var a=function(){"use strict";var t=$("body"),e=$(".nestable-menu"),a=$("#menu_structure"),n=$("#deleted_nodes"),i=[],l=function(){var n={listGroup:$("#menus_template_list_group").html(),listItem:$("#menus_template_list_item").html()},l=Helpers.jsonDecode(a.val(),[]),r=function(t){var e=$(n.listGroup);return _.each(t,function(t,a){e.append(d(t))}),e},d=function(t){var e=n.listItem,a=Helpers.arrayGet(t,"type",""),i=Helpers.arrayGet(t,"title");_.size(i)||(i=Helpers.arrayGet(t,"model_title","")),e=e.replace(/__title__/gi,i),e=e.replace(/__type__/gi,a);var l=$(e);return l.find("[data-field=title] input[type=text]").val(Helpers.arrayGet(t,"title","")),l.find("[data-field=icon_font] input[type=text]").val(Helpers.arrayGet(t,"icon_font","")),l.find("[data-field=css_class] input[type=text]").val(Helpers.arrayGet(t,"css_class","")),l.find("[data-field=target] select").val(Helpers.arrayGet(t,"target","")),"custom-link"!==a?(l.find("[data-field=url]").remove(),l.data("url",null)):(l.find("[data-field=url] input[type=text]").val(Helpers.arrayGet(t,"url","")),l.data("url",Helpers.arrayGet(t,"url",null))),l.data("id",Helpers.arrayGet(t,"id","")),l.data("entity_id",Helpers.arrayGet(t,"entity_id","")),l.data("type",Helpers.arrayGet(t,"type","")),l.data("title",Helpers.arrayGet(t,"title","")),l.data("model_title",Helpers.arrayGet(t,"model_title","")),l.data("icon_font",Helpers.arrayGet(t,"icon_font","")),l.data("css_class",Helpers.arrayGet(t,"css_class","")),l.data("target",Helpers.arrayGet(t,"target","")),Helpers.arrayGet(t,"children",[])&&l.append(r(Helpers.arrayGet(t,"children"))),l};!function(){e.append(r(l))}(),function(){e.nestable({group:1,maxDepth:10,expandBtnHTML:"",collapseBtnHTML:""})}(),function(){t.on("click",".dd-item .dd3-content a.show-item-details",function(t){t.preventDefault(),$(this).toggleClass("active"),$(this).closest(".dd-item").toggleClass("active")}),t.on("change keyup",".dd-item .item-details .fields input[type=text], .dd-item .item-details .fields select",function(t){t.preventDefault();var e=$(this),a=e.closest("label");e.closest(".dd-item").data(a.attr("data-field"),e.val())})}(),function(){_.size(e.find("> .dd-list"))||e.append($(n.listGroup)),t.on("click",".box-link-menus .add-item",function(t){t.preventDefault();var n=$(this).closest(".box-link-menus");switch(n.data("type")){case"custom-link":e.find("> .dd-list").append(a(n));break;default:e.find("> .dd-list").append(i(n))}});var a=function(t){var e={id:null,entity_id:null,type:t.data("type"),title:t.find("input[type=text][data-field=title]").val(),model_title:null,url:t.find("input[type=text][data-field=url]").val(),css_class:t.find("input[type=text][data-field=css_class]").val(),icon_font:t.find("input[type=text][data-field=icon_font]").val(),target:t.find("select[data-field=target]").val()};if(e.title&&e.url)return t.find("input[type=text]").val(""),d(e)},i=function(t){var e={id:null,type:t.data("type")},a=[];return t.find("input[type=checkbox]:checked").each(function(){var t=$(this),n=t.closest("label"),i=$.extend(!0,{entity_id:t.val(),title:null,model_title:n.text().trim(),url:"",css_class:"",icon_font:""},e);a.push(d(i))}),t.find("input[type=checkbox]").prop("checked",!1),a}}(),function(){t.on("click",".dd-item .item-details .btn-remove",function(t){t.preventDefault();var e=$(this).closest(".dd-item"),a=e.find("> .dd-list > .dd-item");_.size(a)&&e.after(a),i.push(e.data("id")),e.remove()})}()},r=function(){var l=function(){return e.nestable("serialize")};t.on("submit",e.closest("form"),function(t){a.val(Helpers.jsonEncode(l())),n.val(Helpers.jsonEncode(i))})};return{init:function(){l(),r()}}}();!function(t){t(window).load(function(){a.init()})}(jQuery)}});
//# sourceMappingURL=edit-menu.js.map